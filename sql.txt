CREATE DATABASE DH

CREATE TABLE TAIKHOAN

( 
 EMAIL VARCHAR(150) PRIMARY KEY,
  MATKHAU NVARCHAR(150),
  TENHIENTHI NVARCHAR(150)
)
GO
CREATE TABLE NHANVIEN
( MANV int identity(1,1) PRIMARY KEY,
  TENNV NVARCHAR(50),
  NGAYSINH DATE,
  SDT varchar(20),
  EMAIL VARCHAR(150) FOREIGN KEY REFERENCES TAIKHOAN(EMAIL),
  AVATAR VARCHAR(255)
)
 GO
 CREATE TABLE KHACHHANG 
 (
 MAKHACHHANG int identity(1,1) PRIMARY KEY,
 TENKHACHHANG NVARCHAR(50),
 DIACHI NVARCHAR(50),
 SDT varchar(20),
 EMAIL VARCHAR(150) FOREIGN KEY REFERENCES TAIKHOAN(EMAIL),
  AVATAR VARCHAR(255)
 )
 
  CREATE TABLE MATHANG
(
 MAMATHANG int identity(1,1) PRIMARY KEY,
 TENHANG NVARCHAR(50),
 ANHSANPHAM VARCHAR(50),
 NGAYSANXUAT DATE,
 TENHANGSANXUAT NVARCHAR(50),
 GIAHANG float,
 BAOHANH NVARCHAR(50),
 LOAI  NVARCHAR(255),
 KICHTHUOC INT,
 TRANGTHAI BIT
 )

 CREATE TABLE NHAPHANG
	  ( MANHAPHANG int identity(1,1) PRIMARY KEY,
	   THANHTIEN FLOAT,
	   NGAYNHAP DATE,
	   MANV int FOREIGN KEY REFERENCES NHANVIEN(MANV)
	)
 CREATE TABLE CHITIETPHIEUNHAP
	   (  MAMATHANG int FOREIGN KEY REFERENCES MATHANG(MAMATHANG),
	      MACTPHIEUNHAP int identity(1,1) PRIMARY KEY,
		  SOLUONG INT,
		  MANHAPHANG  int FOREIGN KEY REFERENCES  NHAPHANG(MANHAPHANG),
		  GIANHAP float,
		  TRANGTHAI BIT

		)
CREATE TABLE HOADON
 ( 
	  MAHD int identity(1,1) PRIMARY KEY,
	  NGAYMUA DATE,
      TONGTIEN float,
	  MAKHACHHANG INT FOREIGN KEY REFERENCES KHACHHANG(MAKHACHHANG)
 )
	  CREATE TABLE CHITIETHOADON
	 (
	 MAHD int  FOREIGN KEY REFERENCES HOADON(MAHD), 
	 MAMATHANG int FOREIGN KEY REFERENCES MATHANG(MAMATHANG),
	 SOLUONG INT,
	 GIABAN float,
	  MACTHD INT identity(1,1) primary key,
	  TRANGTHAI BIT
	  )

 
CREATE TABLE GIOHANG
(
     MAGIOHANG int identity(1,1) PRIMARY KEY,
	 SOLUONGMUA INT,
	  MAMATHANG int FOREIGN KEY REFERENCES MATHANG(MAMATHANG),
	 MAKHACHHANG  int FOREIGN KEY REFERENCES KHACHHANG(MAKHACHHANG),
	 TONGTIEN float
	 )
	  GO