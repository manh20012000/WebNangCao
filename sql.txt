CREATE DATABASE DH

CREATE TABLE TAIKHOAN

( 
  EMAIL VARCHAR(255) PRIMARY KEY,
  MATKHAU NVARCHAR(255),
  TENDANGNHAP NVARCHAR(255)
)
GO
CREATE TABLE NHANVIEN
( MANV int identity(1,1) PRIMARY KEY,
  TENNV NVARCHAR(255),
  NGAYSINH DATE,
  SDT varchar(20),
  EMAIL VARCHAR(255) FOREIGN KEY REFERENCES TAIKHOAN(EMAIL),
  AVATAR VARCHAR(MAX)
)
 GO
 CREATE TABLE KHACHHANG 
 (
 MAKHACHHANG int identity(1,1) PRIMARY KEY,
 TENKHACHHANG NVARCHAR(255),
 DIACHI NVARCHAR(255),
 SDT varchar(20),
 EMAIL VARCHAR(255) FOREIGN KEY REFERENCES TAIKHOAN(EMAIL),
  AVATAR VARCHAR(MAX)
 )
  CREATE TABLE MATHANG
(
 MAMATHANG int identity(1,1) PRIMARY KEY,
 TENHANG NVARCHAR(255),
 ANHSANPHAM VARCHAR(MAX),
 NGAYSANXUAT DATE,
 TENHANGSANXUAT NVARCHAR(250),
 GIAHANG MONEY,
 BAOHANH NVARCHAR(250),
 LOAI  NVARCHAR(255),
 KICHTHUOC INT,
 SALE INT,
 TRANGTHAI BIT
 )

 CREATE TABLE NHAPHANG
	  ( MANHAPHANG int identity(1,1) PRIMARY KEY,
	   THANHTIEN MONEY,
	   NGAYNHAP DATE,
	   MANV int FOREIGN KEY REFERENCES NHANVIEN(MANV), 
	   TRANGTHAI BIT
	)
 CREATE TABLE CHITIETPHIEUNHAP
	   (  MAMATHANG int FOREIGN KEY REFERENCES MATHANG(MAMATHANG),
	      MACTPHIEUNHAP int identity(1,1) PRIMARY KEY,
		  SOLUONG INT,
		  MANHAPHANG  int FOREIGN KEY REFERENCES  NHAPHANG(MANHAPHANG),
		  GIANHAP MONEY,
		)
CREATE TABLE HOADON
 ( 
	  MAHD int identity(1,1) PRIMARY KEY,
	  NGAYMUA DATE,
      TONGTIEN MONEY,
	  MAKHACHHANG INT FOREIGN KEY REFERENCES KHACHHANG(MAKHACHHANG),
	  DIACHINHANHANG NVARCHAR(250),
	   PHUONGTHUCTHANHTOAN  NVARCHAR(250),
	   TRANGTHAI BIT
 )
	  CREATE TABLE CHITIETHOADON
	 (
	 MAHD int  FOREIGN KEY REFERENCES HOADON(MAHD), 
	 MAMATHANG int FOREIGN KEY REFERENCES MATHANG(MAMATHANG),
	 SOLUONG INT,
	 GIABAN MONEY,
	 MACTHD INT identity(1,1) primary key,
	
	  )
CREATE TABLE GIOHANG
(
     MAGIOHANG int identity(1,1) PRIMARY KEY,
	 MAKHACHHANG  int FOREIGN KEY REFERENCES KHACHHANG(MAKHACHHANG),
	 TRANGTHAI BIT
	 )
	  CREATE TABLE CHITIETGIOHANG(
	  MACHITIETGIOHANG int identity(1,1) PRIMARY KEY,
	  MAMATHANG int FOREIGN KEY REFERENCES MATHANG(MAMATHANG),
	  MAGIOHANG int FOREIGN KEY REFERENCES GIOHANG(MAGIOHANG),
       SOLUONGMUA INT,
	   DONGIA MONEY
	  )	  GO